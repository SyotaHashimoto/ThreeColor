% 導入
\section{はじめに}
% Coq + ssreflect の説明
Coq~\cite{Coq} とは数学の定理や補題，主張の正しさを保証するためのソフトウェアの$1$つである．
証明の作成中の各場面で示すべき主張（サブゴール）に対して人間がサブゴールを示すための次の一手を指示するとCoqは次のサブゴールを提示し，人間の次の一手を待つ．
このような対話的なやりとりによりCoqは証明の完成の手助けをする．こういったソフトウェアを定理証明支援系と呼ぶ．
証明の規模が大きくなると，複雑な場合分けの漏れがあったり計算ミスなど機械的操作のミスにより人間は誤った証明をしてしまうことがある．
Coq の支援を受けることで，このような誤りが排除された信頼できる証明を得ることができる．
また，Coq はプログラミング言語でもあるため，作成した証明の複製が容易である．
Coq を用いて作成した証明ファイルを公開することで他の人がライブラリとして利用することができる．
既に示された定理は保証済みのものとして，多くの人が各々の目的達成のために利用することができる．
このように，公開された証明1つ1つがたとえ小さな証明であっても組み合わせることで規模の大きな証明の定理を示しやすくなる．

本研究では，Coq + SSReflect を用いて三角形三色問題の証明の形式化を完成させた．
\footnote{
  \url{https://github.com/SyotaHashimoto/ThreeColor}から完成させたCoqのコードをダウンロードすることができる．
}
SSReflect~\cite{SSReflect,CoqBook} は「証明によるリーズニングよりも計算を積極的に用いた方が証明は簡略化される」(ポワンカレ原理)のポリシーに基づいて設計された Coq の拡張ライブラリである．
簡単な同値変形で示すことができる命題論理や等式・不等式に関する主張の証明などは論理式として推論で示すよりもブール型の項と見なして変形した方が効率がよく，SSReflect はその機能を提供する．

三角形三色問題~\cite{Nishiyama1,Nishiyama2,Nishiyama3}とは，次のような問題である：$n$段の逆三角形に配置された正六角形のすべてのマスを異なる3色を用いて色分けをする．ただし，隣り合う2マスとそれらに接する下の段のマスの色は，どれも同じかどれも異なるように塗り分ける．このとき，逆三角形の段数が 3, 9, 27 段の場合 \footnote{本稿では0段目, 1段目, 2段目,$\ldots$と数える．「$n$段の逆三角形」と書いた場合，一辺のマスの個数は$n+1$個である．} は，規則に従ったどのような色の塗り方をしても逆三角形の端点の3マスの色はどれも同じかどれも異なるが，一般にはこのような性質は成り立たない．このような性質を満たす段数の一般項は何か？という問題である．この問題の解決方法は大きく分けて3つの方法が知られている．\cite{Nishiyama1}
\begin{enumerate}
\item \label{ans_1}
  パスカルの三角形の値をmod $3$としたものをマスの色と対応させて使い，代数学での $Lucas$ の定理と関係のある命題を示すことで解決する方法．
\item \label{ans_2}
  逆三角形のマスの塗り方が$n$個の独立パターンに分解できること利用して，重ね合わせの原理を用いることで解決する方法．
\item \label{ans_3}
  比較的少ない段数で成立する段数を調べて段数の規則性(数列)を見つけ出し，この数列から予測できる段数の一般項を推測する方法．
\end{enumerate}
\ref{ans_3}の方法において一般項が$3^k$段であると推測されており，推測された一般項の段数でないならば逆三角形の塗り方の規則に従わない反例が存在することも知られている．

% やったこと
本研究では\ref{ans_3}.の方法で推測して得られた一般項が必要十分条件になっていることを Coq+SSReflect を用いて証明した．
Coq に実装するにあたって，三角形三色問題は幾何的な側面を多くもつ問題であるためこのままでは Coq にコードとして実装することができない．
そこで，三角形のマスの状況を表現する論理式を用意し，色塗り規則を公理化することで三角形三色問題の状況を形式化した．
また，十分条件の証明の方法としては一般項に現れる自然数$k$に関する数学的帰納法を用いて証明した．
一方で，必要条件は対偶法と$n$について場合分けをすることで証明した．

% もくじ
本論文は
第$2$章では三角形三色問題の証明の概要について述べる．
第$3$章では三角形三色問題の証明をCoqに実装するために必要な準備について述べる．
第$4$章では実際にCoqに実装した三角形三色問題の証明について述べる．
第$5$章ではまとめを述べる．
